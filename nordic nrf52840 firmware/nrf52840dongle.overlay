/*
 * nrf52840dongle.overlay
 *
 * Goals (NCS 3.2.1 / Zephyr 4.2.x):
 * - USB CDC ACM console (legacy USB device stack)
 * - Use the board's existing fixed-partitions 'storage_partition' for settings
 *   (so BT bonds/CCCs persist)
 *
 * IMPORTANT:
 * - Do NOT add a second partition with label="storage". The board already has
 *   one, and duplicates can break settings init.
 */

&usbd {
	status = "okay";

	cdc_acm_uart0: cdc_acm_uart0 {
		compatible = "zephyr,cdc-acm-uart";
		status = "okay";
	};
};

/ {
	chosen {
		zephyr,console = &cdc_acm_uart0;
		zephyr,shell-uart = &cdc_acm_uart0;
		zephyr,uart-mcumgr = &cdc_acm_uart0;

		/* Make settings_nvs (and therefore BT_SETTINGS) use the board's storage
		 * partition explicitly.
		 */
		zephyr,settings-partition = &storage_partition;
	};

	aliases {
		uart-0 = &cdc_acm_uart0;
	};
};
